{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect, useState } from 'react';\nimport { ResponsiveContainer, PieChart, Tooltip, Pie } from 'recharts';\nimport { format_to_gb } from '../../library/format';\nimport '../../styles/Admin/db.css';\nexport default function DB(props) {\n  var _useState = useState({}),\n      dbState = _useState[0],\n      setDBState = _useState[1];\n\n  useEffect(function () {\n    fetch(process.env.NEXT_PUBLIC_MONITOR_DB).then(function (res) {\n      return res.json();\n    }).then(function (db) {\n      setDBState(db);\n    });\n  }, []);\n  return __jsx(\"div\", {\n    className: \"card-wrapper db-container \".concat(props.className)\n  }, __jsx(\"p\", {\n    className: \"card-title\"\n  }, \"aaronbaeDB\"), dbState && __jsx(\"div\", null, __jsx(ResponsiveContainer, {\n    width: \"100%\",\n    height: 150\n  }, __jsx(PieChart, null, __jsx(Tooltip, null), __jsx(Pie, {\n    data: [{\n      name: \"used\",\n      memory: format_to_gb(dbState.machine_memory_used, 2)\n    }, {\n      name: \"free\",\n      memory: format_to_gb(dbState.machine_memory_total - dbState.machine_memory_used, 2)\n    }],\n    dataKey: \"memory\",\n    nameKey: \"name\",\n    cx: \"50%\",\n    cy: \"50%\",\n    outerRadius: 60,\n    fill: \"#ffa600\",\n    label: true\n  }))), __jsx(\"p\", {\n    className: \"memory-used-label\"\n  }, \"Machine Memory Used (GB)\"), __jsx(\"div\", {\n    className: \"card-section-break\"\n  }), __jsx(\"table\", {\n    className: \"db-table\"\n  }, __jsx(\"thead\", null, __jsx(\"tr\", null, __jsx(\"th\", null, \"Collection\"), __jsx(\"th\", null, \"Doc Count\"), __jsx(\"th\", null, \"Memory (GB)\"))), __jsx(\"tbody\", null, dbState.collections && dbState.collections.map(function (item, index) {\n    return __jsx(\"tr\", {\n      key: index\n    }, __jsx(\"td\", null, item.name), __jsx(\"td\", {\n      className: \"db-table-values\"\n    }, item.n), __jsx(\"td\", {\n      className: \"db-table-values\"\n    }, format_to_gb(item.reserved, 4)));\n  })))));\n}","map":null,"metadata":{},"sourceType":"module"}